<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI-Education - 我的学习</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <link rel="stylesheet" href="/static/css/coursecontent.css" />
    <script src="/static/js/coursecontent.js"></script>
  </head>
  <body>
    <!-- Header -->
    <header class="main-header">
      <div style="display: flex; align-items: center; gap: 32px">
        <span
          class="logo"
          onclick="window.location.href='/static/mainpage.html'"
          >AI-Education</span
        >
        <nav class="nav-links">
          <a href="/static/mainpage.html">首页</a>
          <a href="/static/mylearning.html">我的学习</a>
          <a href="/static/coursecontent.html" class="active">课程内容</a>
        </nav>
      </div>
      <div style="display: flex; align-items: center; gap: 16px">
        <div
          style="
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--primary-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
          "
          title="个人中心"
        >
          W
        </div>
      </div>
    </header>

    <!-- Main 3-Column Layout -->
    <div class="main-container">
      <!-- Left Sidebar: Mini TOC -->
      <aside class="left-sidebar">
        <div class="sidebar-title">
          <span>📚</span>
          <span>课程目录</span>
        </div>
        <ul class="toc-tree" id="toc-tree">
          <!-- Dynamic content will be inserted here -->
          <li style="text-align: center; color: var(--text-dim); padding: 20px">
            加载中...
          </li>
        </ul>
      </aside>

      <!-- Middle Panel: Resource Display -->
      <section class="middle-panel">
        <!-- Welcome Screen -->
        <div class="welcome-screen" id="welcome-screen">
          <div class="welcome-icon">🎓</div>
          <h2>欢迎来到我的学习</h2>
          <p>
            点击左侧目录选择章节，查看课程资源。<br />
            右侧的 AI 助教随时准备为您解答问题。
          </p>
        </div>

        <!-- Resource Container -->
        <div class="resource-container" id="resource-container">
          <div class="resource-header">
            <div class="resource-title" id="resource-title">资源列表</div>
            <div class="resource-list" id="resource-list">
              <!-- Dynamic resource badges -->
            </div>
          </div>
          <div class="resource-viewer">
            <div class="no-resource" id="no-resource">请选择左侧的资源查看</div>
            <iframe id="pdf-viewer" style="display: none"></iframe>
            <video id="video-player" controls style="display: none"></video>
          </div>
        </div>
      </section>

      <!-- Right Sidebar: AI Assistant -->
      <aside class="right-sidebar">
        <div class="ai-tabs">
          <button class="ai-tab active" data-tab="chat">💬 AI 助教</button>
          <button class="ai-tab" data-tab="summary">📝 总结</button>
          <button class="ai-tab" data-tab="quiz">📋 测验</button>
        </div>

        <!-- Chat Tab -->
        <div class="ai-content active" id="chat-content">
          <div id="chat-messages">
            <div class="chat-message bot">
              你好！我是 AI 助教，有什么可以帮助你的吗？
            </div>
          </div>
        </div>

        <!-- Summary Tab -->
        <div class="ai-content" id="summary-content">
          <div class="summary-controls">
            <input
              type="text"
              id="summary-topic"
              placeholder="输入要总结的主题..."
            />
            <button id="generate-summary-btn">✨ 生成总结</button>
          </div>
          <div id="summary-output">
            <p style="color: var(--text-dim)">点击上方按钮生成知识总结</p>
          </div>
        </div>

        <!-- Quiz Tab -->
        <div class="ai-content" id="quiz-content">
          <div class="quiz-section">
            <div class="quiz-card">
              <h3>📝 在线测验</h3>
              <p>测试你的学习成果，巩固知识点</p>
              <button class="quiz-button" id="start-quiz-btn">开始测验</button>
            </div>

            <div class="quiz-topics">
              <h4 style="margin-bottom: 12px; font-size: 14px">快速测验主题</h4>
              <div class="quiz-topic-item" data-topic="大数据基础概念">
                <span>大数据基础概念</span>
                <span>→</span>
              </div>
              <div class="quiz-topic-item" data-topic="数据获取">
                <span>数据获取</span>
                <span>→</span>
              </div>
              <div class="quiz-topic-item" data-topic="数据预处理">
                <span>数据预处理</span>
                <span>→</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Chat Input (sticky at bottom) -->
        <div class="chat-input-area">
          <div class="chat-input-row">
            <input type="text" id="chat-input" placeholder="输入你的问题..." />
            <button id="send-chat-btn">发送</button>
          </div>
        </div>
      </aside>
    </div>
  </body>
</html>
