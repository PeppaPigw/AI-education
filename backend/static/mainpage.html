<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI-Education - 智能教育平台</title>
    <link rel="stylesheet" href="/static/css/mainpage.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <header class="main-header">
      <nav class="navbar container">
        <div class="nav-left">
          <span
            class="logo"
            onclick="window.location.href='/static/mainpage.html'"
            >AI-Education</span
          >
          <div class="nav-links">
            <a href="/static/mainpage.html" class="active">首页</a>
            <a href="/static/mylearning.html">我的学习</a>
            <a href="/static/coursecontent.html">课程内容</a>
          </div>
        </div>

        <div class="nav-right">
          <div class="profile-icon" title="个人中心" style="cursor: pointer">
            W
          </div>
        </div>
      </nav>
    </header>

    <main class="main-content container">
      <section class="welcome-header">
        <h1>欢迎来到 AI-Education 智能教育平台 🎓</h1>
      </section>

      <div class="content-layout" id="courses">
        <div class="learning-feed">
          <div class="course-card">
            <div class="info">
              <div class="provider">AI-Education 平台</div>
              <h3>大数据分析基础课程</h3>
              <div class="progress-text">
                课程 · 15% 已完成 · 预计还需 4 周完成
              </div>
              <div class="progress-bar">
                <div style="width: 15%"></div>
              </div>
            </div>
            <button
              class="start-button"
              onclick="window.location.href='/static/coursecontent.html'"
            >
              继续学习
            </button>
          </div>

          <div class="course-card">
            <div class="info">
              <div class="provider">AI-Education 平台</div>
              <h3>数据获取与预处理</h3>
              <div class="progress-text">下一章节 · 约 45 分钟</div>
            </div>
            <button
              class="start-button"
              onclick="window.location.href='/static/coursecontent.html'"
            >
              开始学习
            </button>
          </div>

          <div class="course-card">
            <div class="info">
              <div class="provider">AI-Education 平台</div>
              <h3>机器学习与深度学习</h3>
              <div class="progress-text">即将开放 · 预计 2 周后</div>
            </div>
          </div>
        </div>

        <aside class="sidebar" style="height: 100%">
          <div class="sidebar-widget">
            <h4>本周学习目标</h4>
            <div class="goal-item">
              <span class="icon">📚</span>
              <span>完成大数据基础章节</span>
            </div>
            <div class="goal-item">
              <span class="icon">✍️</span>
              <span>完成随堂测验 2/5</span>
            </div>
            <div class="goal-item">
              <span class="icon">🎯</span>
              <span>查看知识图谱</span>
            </div>
            <div class="goal-item">
              <span class="icon">📅</span>
              <span>制定个性化学习计划</span>
            </div>
          </div>
        </aside>
      </div>

      <section class="recommendations">
        <h2>推荐学习路径 📖</h2>

        <div class="recommend-grid">
          <div class="career-card">
            <div class="career-card-header">
              <div class="bg-shape" style="background-color: #e3f2fd"></div>
              <div
                style="
                  font-size: 60px;
                  position: absolute;
                  bottom: 10px;
                  left: 50%;
                  transform: translateX(-50%);
                "
              >
                📊
              </div>
            </div>
            <div class="career-card-body">
              <h5>大数据基础概念</h5>
              <p>学习大数据基础概念，掌握大数据分析的核心概念和实践技能。</p>
            </div>
          </div>

          <div class="career-card">
            <div class="career-card-header">
              <div
                class="bg-shape"
                style="background-color: #f3e5f5"
                style="height: 100%"
              ></div>
              <div
                style="
                  font-size: 60px;
                  position: absolute;
                  bottom: 10px;
                  left: 50%;
                  transform: translateX(-50%);
                "
              >
                🤖
              </div>
            </div>
            <div class="career-card-body">
              <h5>数据获取</h5>
              <p>学习数据获取，掌握数据获取的核心概念和实践技能。</p>
            </div>
          </div>

          <div class="career-card">
            <div class="career-card-header">
              <div class="bg-shape" style="background-color: #e8f5e9"></div>
              <div
                style="
                  font-size: 60px;
                  position: absolute;
                  bottom: 10px;
                  left: 50%;
                  transform: translateX(-50%);
                "
              >
                🧠
              </div>
            </div>
            <div class="career-card-body">
              <h5>数据质量与预处理</h5>
              <p>
                学习数据质量与预处理，掌握数据质量与预处理的核心概念和实践技能。
              </p>
            </div>
          </div>

          <div class="career-card">
            <div class="career-card-header">
              <div class="bg-shape" style="background-color: #fff3e0"></div>
              <div
                style="
                  font-size: 60px;
                  position: absolute;
                  bottom: 10px;
                  left: 50%;
                  transform: translateX(-50%);
                "
              >
                💾
              </div>
            </div>
            <div class="career-card-body">
              <h5>数据存储系统</h5>
              <p>学习数据存储系统，掌握数据存储系统的核心概念和实践技能。</p>
            </div>
          </div>
        </div>
      </section>

      <section class="knowledge-graph-section">
        <h2>知识图谱 🗺️</h2>
        <p style="color: var(--text-light); margin-bottom: 20px">
          可视化课程知识结构，点击节点展开或折叠子节点
        </p>
        <div id="knowledge-graph-container">
          <div id="knowledge-graph"></div>
        </div>
      </section>
    </main>

    <script src="/static/js/graph.js"></script>
    <script>
      console.log("AI-Education Main Page Loaded");

      // 加载知识图谱
      fetch("/api/knowledge-graph")
        .then((response) => response.json())
        .then((data) => {
          console.log("Knowledge graph data loaded:", data);
          if (data && (data.name || data.root_name)) {
            // 兼容两种数据格式
            if (data.name && !data.root_name) {
              data.root_name = data.name;
            }
            // 使用原有的graph.js初始化函数
            if (window.initializeGraph) {
              window.initializeGraph(data);
            } else {
              console.error("initializeGraph function not found");
            }
          }
        })
        .catch((error) =>
          console.error("Failed to load knowledge graph:", error)
        );
    </script>
  </body>
</html>
