<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI-Education 🎓 - 智能教育平台</title>
    <link rel="stylesheet" href="/static/css/style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  </head>
  <body>
    <div class="container">
      <!-- 左侧：知识图谱/PDF 查看器 -->
      <div class="left-panel">
        <div id="knowledge-graph-container">
          <div id="knowledge-graph"></div>
        </div>
        <div id="pdf-viewer-container" style="display: none">
          <iframe id="pdf-viewer" width="100%" height="100%"></iframe>
        </div>
        <div
          id="video-player-container"
          style="display: none; width: 100%; height: 100%"
        >
          <video
            id="video-player"
            controls
            style="width: 100%; height: 100%"
          ></video>
        </div>
      </div>

      <!-- 右侧：功能面板 -->
      <div class="right-panel">
        <h1>🎓 AI-Education</h1>

        <!-- 资源显示 -->
        <div id="resource-display-group" style="display: none">
          <h3>📚 学习资源</h3>
          <div id="resource-list"></div>
        </div>

        <!-- 主功能面板 -->
        <div id="main-function-group" style="display: none">
          <div class="controls">
            <label>🌐 语言设置</label>
            <select id="lang-select">
              <option>🌐 Auto-detect</option>
            </select>

            <label>⚙️ 功能选择</label>
            <select id="feature-select">
              <option>🤖 AI 助教</option>
              <option>📝 随堂测验</option>
              <option>🗺️ 学习计划</option>
              <option>📜 知识总结</option>
              <option>📤 上传新资源</option>
            </select>
          </div>

          <!-- AI 助教 -->
          <div id="chat-group" class="feature-group">
            <div id="chatbot"></div>
            <div class="input-row">
              <input
                type="text"
                id="chat-input"
                placeholder="💬 输入你的问题..."
              />
              <button id="send-btn">发送</button>
            </div>
          </div>

          <!-- 随堂测验 -->
          <div id="quiz-group" class="feature-group" style="display: none">
            <input
              type="text"
              id="quiz-subject"
              placeholder="📝 输入测验主题"
            />
            <button id="start-quiz-btn">🚀 开始测验</button>
            <div id="quiz-question"></div>
            <div class="quiz-buttons">
              <button class="quiz-choice" data-choice="a">A</button>
              <button class="quiz-choice" data-choice="b">B</button>
              <button class="quiz-choice" data-choice="c">C</button>
              <button class="quiz-choice" data-choice="d">D</button>
            </div>
            <div id="quiz-result"></div>
            <hr />
            <h3>📊 生成学习计划</h3>
            <input type="text" id="quiz-name" placeholder="👤 输入你的名字" />
            <button id="plan-from-quiz-btn">📋 根据测验生成计划</button>
            <div id="plan-quiz-output"></div>
          </div>

          <!-- 学习计划 -->
          <div id="plan-group" class="feature-group" style="display: none">
            <input type="text" id="plan-name" placeholder="👤 输入你的名字" />
            <input
              type="text"
              id="plan-goals"
              placeholder="🎯 学习目标 (用分号隔开)"
            />
            <button id="plan-btn">🚀 生成个性化计划</button>
            <div id="plan-output"></div>
          </div>

          <!-- 知识总结 -->
          <div id="summary-group" class="feature-group" style="display: none">
            <input
              type="text"
              id="summary-topic"
              placeholder="📖 输入主题或材料"
            />
            <button id="summary-btn">✨ 生成智能总结</button>
            <div id="summary-output"></div>
          </div>

          <!-- 上传资源 -->
          <div id="upload-group" class="feature-group" style="display: none">
            <h3>📤 上传学习资源</h3>
            <div id="current-node-display"></div>
            <input
              type="file"
              id="upload-files"
              multiple
              accept=".pdf,.doc,.docx,.ppt,.pptx"
            />
            <button id="upload-btn">⬆️ 上传并关联到节点</button>
            <div id="upload-status"></div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="/static/js/graph.js"
      onerror="console.error('Failed to load graph.js')"
    ></script>
    <script
      src="/static/js/app.js"
      onerror="console.error('Failed to load app.js')"
    ></script>
  </body>
</html>
